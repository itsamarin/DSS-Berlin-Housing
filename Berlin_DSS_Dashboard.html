<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berlin Housing DSS - Interactive Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #312e81 50%, #4c1d95 100%);
            color: #f1f5f9;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #fbbf24, #f59e0b, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            font-weight: 800;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #e0e7ff;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab {
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .tab:nth-child(1):hover {
            background: rgba(59, 130, 246, 0.3);
            border-color: #3b82f6;
        }

        .tab:nth-child(2):hover {
            background: rgba(16, 185, 129, 0.3);
            border-color: #10b981;
        }

        .tab:nth-child(3):hover {
            background: rgba(245, 158, 11, 0.3);
            border-color: #f59e0b;
        }

        .tab:nth-child(4):hover {
            background: rgba(236, 72, 153, 0.3);
            border-color: #ec4899;
        }

        .tab.active {
            color: #0f172a;
        }

        .tab:nth-child(1).active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .tab:nth-child(2).active {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .tab:nth-child(3).active {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .tab:nth-child(4).active {
            background: linear-gradient(135deg, #ec4899, #db2777);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(59, 130, 246, 0.15) 100%);
            padding: 1.5rem;
            border-radius: 15px;
            border-left: 4px solid #3b82f6;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card:nth-child(1) {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(59, 130, 246, 0.15) 100%);
            border-left-color: #3b82f6;
        }

        .stat-card:nth-child(2) {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3) 0%, rgba(16, 185, 129, 0.15) 100%);
            border-left-color: #10b981;
        }

        .stat-card:nth-child(3) {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.3) 0%, rgba(245, 158, 11, 0.15) 100%);
            border-left-color: #f59e0b;
        }

        .stat-card:nth-child(4) {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3) 0%, rgba(239, 68, 68, 0.15) 100%);
            border-left-color: #ef4444;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #fbbf24;
            display: block;
            margin-bottom: 0.5rem;
        }

        .stat-card:nth-child(1) .stat-number {
            color: #60a5fa;
        }

        .stat-card:nth-child(2) .stat-number {
            color: #34d399;
        }

        .stat-card:nth-child(3) .stat-number {
            color: #fbbf24;
        }

        .stat-card:nth-child(4) .stat-number {
            color: #f87171;
        }

        .stat-label {
            font-size: 1rem;
            color: #cbd5e1;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.08);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .chart-container:hover {
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .chart-title {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: #fbbf24;
            text-align: center;
            font-weight: 600;
        }

        .filters {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(16, 185, 129, 0.15));
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .filter-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group label {
            color: #cbd5e1;
            font-weight: 600;
        }

        .filter-group select,
        .filter-group input {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 2px solid #60a5fa;
            background: rgba(255, 255, 255, 0.1);
            color: #f1f5f9;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #34d399;
            box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.2);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(16, 185, 129, 0.3));
            color: #60a5fa;
            font-weight: 600;
        }

        tr:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        .recommendation-card {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(147, 51, 234, 0.1) 100%);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            border-left: 4px solid #ec4899;
            transition: all 0.3s ease;
        }

        .recommendation-card:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 24px rgba(236, 72, 153, 0.3);
        }

        .recommendation-card h3 {
            color: #f9a8d4;
            margin-bottom: 0.5rem;
        }

        .recommendation-card .score {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fbbf24;
            margin-bottom: 0.5rem;
        }

        .recommendation-card .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .detail-item {
            color: #cbd5e1;
        }

        .detail-item strong {
            color: #f1f5f9;
        }

        button {
            transition: all 0.3s ease;
        }

        button:hover {
            background: #fbbf24 !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8rem;
            }

            .filter-group {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Berlin Housing Decision Support System</h1>
            <p class="subtitle">Interactive Analytics Dashboard for Accommodation Matching & Occupancy Optimization</p>
        </header>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('overview')">Overview Dashboard</div>
            <div class="tab" onclick="switchTab('tenant')">Tenant View</div>
            <div class="tab" onclick="switchTab('landlord')">Landlord Analytics</div>
            <div class="tab" onclick="switchTab('matching')">Smart Matching</div>
        </div>

        <!-- Overview Dashboard -->
        <div id="overview" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">2,319</span>
                    <span class="stat-label">Total Listings</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">2,000</span>
                    <span class="stat-label">Active Tenants</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">4.2/5</span>
                    <span class="stat-label">Avg. Satisfaction</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">62.5%</span>
                    <span class="stat-label">Verification Rate</span>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Listings by District</h3>
                    <canvas id="districtChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Room Type Distribution</h3>
                    <canvas id="roomTypeChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Price vs Satisfaction</h3>
                    <canvas id="priceVsSatisfactionChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Monthly Booking Trends</h3>
                    <canvas id="bookingTrendsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Tenant View -->
        <div id="tenant" class="tab-content">
            <h2 style="margin-bottom: 1.5rem; color: #f59e0b;">Find Your Perfect Accommodation</h2>

            <div class="filters">
                <div class="filter-group">
                    <label>District:</label>
                    <select id="districtFilter">
                        <option value="all">All Districts</option>
                        <option value="Mitte">Mitte</option>
                        <option value="Kreuzberg">Kreuzberg</option>
                        <option value="Friedrichshain">Friedrichshain</option>
                        <option value="Charlottenburg">Charlottenburg</option>
                        <option value="Prenzlauer Berg">Prenzlauer Berg</option>
                    </select>

                    <label>Max Price (€):</label>
                    <input type="number" id="priceFilter" placeholder="e.g., 1000" min="0">

                    <label>Room Type:</label>
                    <select id="roomTypeFilter">
                        <option value="all">All Types</option>
                        <option value="Private">Private Room</option>
                        <option value="Entire">Entire Place</option>
                        <option value="Shared">Shared Room</option>
                    </select>

                    <button onclick="populateTenantTable()" style="padding: 0.75rem 2rem; background: #f59e0b; color: #0f172a; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 0.5rem;">Search Accommodations</button>
                </div>
            </div>

            <div style="overflow-x: auto;">
                <table id="tenantTable">
                    <thead>
                        <tr>
                            <th>Property</th>
                            <th>District</th>
                            <th>Type</th>
                            <th>Price (€/month)</th>
                            <th>Rating</th>
                            <th>Distance to Center</th>
                            <th>Verified</th>
                        </tr>
                    </thead>
                    <tbody id="tenantTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Landlord Analytics -->
        <div id="landlord" class="tab-content">
            <h2 style="margin-bottom: 1.5rem; color: #f59e0b;">Landlord Performance Analytics</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">€1,245</span>
                    <span class="stat-label">Avg. Monthly Revenue</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">78%</span>
                    <span class="stat-label">Occupancy Rate</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">4.3/5</span>
                    <span class="stat-label">Avg. Guest Rating</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">12.5</span>
                    <span class="stat-label">Avg. Days to Book</span>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Revenue by District</h3>
                    <canvas id="revenueChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">Occupancy Trends</h3>
                    <canvas id="occupancyChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Smart Matching -->
        <div id="matching" class="tab-content">
            <h2 style="margin-bottom: 1.5rem; color: #f59e0b;">AI-Powered Property Matching</h2>

            <div class="filters">
                <h3 style="color: #f59e0b; margin-bottom: 1rem;">Your Preferences</h3>
                <div class="filter-group">
                    <label>Budget (€):</label>
                    <input type="number" id="matchBudget" placeholder="1000" value="1000">

                    <label>Preferred District:</label>
                    <select id="matchDistrict">
                        <option value="Mitte">Mitte</option>
                        <option value="Kreuzberg">Kreuzberg</option>
                        <option value="Friedrichshain">Friedrichshain</option>
                        <option value="Charlottenburg">Charlottenburg</option>
                    </select>

                    <label>Min Rating:</label>
                    <input type="number" id="matchRating" min="1" max="5" step="0.1" value="4.0">

                    <button onclick="generateRecommendations()" style="padding: 0.75rem 2rem; background: #f59e0b; color: #0f172a; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 0.5rem;">Find Matches</button>
                </div>
            </div>

            <h3 style="color: #f59e0b; margin: 2rem 0 1rem 0;">Top Recommendations</h3>
            <div id="recommendationsContainer"></div>
        </div>
    </div>

    <script>
        // Sample Data
        const sampleListings = [
            { id: 1, name: "Cozy Apartment in Mitte", district: "Mitte", type: "Entire", price: 1200, rating: 4.5, distance: 2.1, verified: true },
            { id: 2, name: "Modern Studio Kreuzberg", district: "Kreuzberg", type: "Private", price: 850, rating: 4.3, distance: 3.5, verified: true },
            { id: 3, name: "Spacious Loft Friedrichshain", district: "Friedrichshain", type: "Entire", price: 1400, rating: 4.7, distance: 4.2, verified: true },
            { id: 4, name: "Charming Room Charlottenburg", district: "Charlottenburg", type: "Private", price: 750, rating: 4.1, distance: 5.8, verified: false },
            { id: 5, name: "Luxury Penthouse Mitte", district: "Mitte", type: "Entire", price: 2200, rating: 4.9, distance: 1.5, verified: true },
            { id: 6, name: "Budget Room Prenzlauer Berg", district: "Prenzlauer Berg", type: "Shared", price: 450, rating: 3.8, distance: 4.8, verified: true },
            { id: 7, name: "Central Apartment Kreuzberg", district: "Kreuzberg", type: "Entire", price: 1100, rating: 4.4, distance: 3.2, verified: true },
            { id: 8, name: "Artistic Space Friedrichshain", district: "Friedrichshain", type: "Private", price: 900, rating: 4.6, distance: 4.5, verified: true },
        ];

        // Tab Switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'matching') {
                generateRecommendations();
            }
        }

        // Initialize Charts
        const chartColors = {
            primary: '#f59e0b',
            secondary: '#fbbf24',
            tertiary: '#fb923c',
            background: 'rgba(245, 158, 11, 0.2)'
        };

        // District Chart
        const districtCtx = document.getElementById('districtChart').getContext('2d');
        new Chart(districtCtx, {
            type: 'bar',
            data: {
                labels: ['Mitte', 'Kreuzberg', 'Friedrichshain', 'Charlottenburg', 'Prenzlauer Berg', 'Neukölln'],
                datasets: [{
                    label: 'Number of Listings',
                    data: [450, 380, 295, 340, 310, 280],
                    backgroundColor: chartColors.primary,
                    borderColor: chartColors.secondary,
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#f1f5f9' } }
                },
                scales: {
                    y: { ticks: { color: '#f1f5f9' }, grid: { color: 'rgba(255, 255, 255, 0.1)' } },
                    x: { ticks: { color: '#f1f5f9' }, grid: { color: 'rgba(255, 255, 255, 0.1)' } }
                }
            }
        });

        // Room Type Chart
        const roomTypeCtx = document.getElementById('roomTypeChart').getContext('2d');
        new Chart(roomTypeCtx, {
            type: 'doughnut',
            data: {
                labels: ['Entire Place', 'Private Room', 'Shared Room'],
                datasets: [{
                    data: [1200, 950, 169],
                    backgroundColor: [chartColors.primary, chartColors.secondary, chartColors.tertiary],
                    borderWidth: 2,
                    borderColor: '#0f172a'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#f1f5f9' } }
                }
            }
        });

        // Price vs Satisfaction Scatter
        const priceVsSatisfactionCtx = document.getElementById('priceVsSatisfactionChart').getContext('2d');
        new Chart(priceVsSatisfactionCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Properties',
                    data: [
                        { x: 800, y: 4.2 }, { x: 1200, y: 4.5 }, { x: 950, y: 4.1 },
                        { x: 1500, y: 4.7 }, { x: 650, y: 3.8 }, { x: 1100, y: 4.4 },
                        { x: 2000, y: 4.9 }, { x: 750, y: 4.0 }, { x: 1350, y: 4.6 }
                    ],
                    backgroundColor: chartColors.primary,
                    borderColor: chartColors.secondary,
                    borderWidth: 2,
                    pointRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#f1f5f9' } }
                },
                scales: {
                    y: {
                        title: { display: true, text: 'Satisfaction Rating', color: '#f1f5f9' },
                        ticks: { color: '#f1f5f9' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)' }
                    },
                    x: {
                        title: { display: true, text: 'Price (€)', color: '#f1f5f9' },
                        ticks: { color: '#f1f5f9' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)' }
                    }
                }
            }
        });

        // Booking Trends Line Chart
        const bookingTrendsCtx = document.getElementById('bookingTrendsChart').getContext('2d');
        new Chart(bookingTrendsCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Bookings',
                    data: [850, 920, 1100, 1250, 1400, 1550, 1650, 1600, 1450, 1300, 1050, 900],
                    borderColor: chartColors.primary,
                    backgroundColor: chartColors.background,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#f1f5f9' } }
                },
                scales: {
                    y: { ticks: { color: '#f1f5f9' }, grid: { color: 'rgba(255, 255, 255, 0.1)' } },
                    x: { ticks: { color: '#f1f5f9' }, grid: { color: 'rgba(255, 255, 255, 0.1)' } }
                }
            }
        });

        // Revenue Chart
        const revenueCtx = document.getElementById('revenueChart').getContext('2d');
        new Chart(revenueCtx, {
            type: 'bar',
            data: {
                labels: ['Mitte', 'Kreuzberg', 'Friedrichshain', 'Charlottenburg', 'Prenzlauer Berg'],
                datasets: [{
                    label: 'Avg Monthly Revenue (€)',
                    data: [1450, 1200, 1100, 1350, 1250],
                    backgroundColor: chartColors.primary,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#f1f5f9' } }
                },
                scales: {
                    y: { ticks: { color: '#f1f5f9' }, grid: { color: 'rgba(255, 255, 255, 0.1)' } },
                    x: { ticks: { color: '#f1f5f9' }, grid: { color: 'rgba(255, 255, 255, 0.1)' } }
                }
            }
        });

        // Occupancy Chart
        const occupancyCtx = document.getElementById('occupancyChart').getContext('2d');
        new Chart(occupancyCtx, {
            type: 'line',
            data: {
                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                datasets: [{
                    label: 'Occupancy Rate (%)',
                    data: [72, 78, 82, 76],
                    borderColor: chartColors.primary,
                    backgroundColor: chartColors.background,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { labels: { color: '#f1f5f9' } }
                },
                scales: {
                    y: {
                        min: 0,
                        max: 100,
                        ticks: { color: '#f1f5f9' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)' }
                    },
                    x: { ticks: { color: '#f1f5f9' }, grid: { color: 'rgba(255, 255, 255, 0.1)' } }
                }
            }
        });

        // Populate Tenant Table
        function populateTenantTable() {
            const tbody = document.getElementById('tenantTableBody');
            tbody.innerHTML = '';

            // Get filter values
            const districtFilter = document.getElementById('districtFilter').value;
            const priceFilter = parseFloat(document.getElementById('priceFilter').value) || Infinity;
            const roomTypeFilter = document.getElementById('roomTypeFilter').value;

            // Filter listings
            const filteredListings = sampleListings.filter(listing => {
                const matchesDistrict = districtFilter === 'all' || listing.district === districtFilter;
                const matchesPrice = listing.price <= priceFilter;
                const matchesRoomType = roomTypeFilter === 'all' || listing.type === roomTypeFilter;

                return matchesDistrict && matchesPrice && matchesRoomType;
            });

            // Display filtered results
            filteredListings.forEach(listing => {
                const row = `
                    <tr>
                        <td>${listing.name}</td>
                        <td>${listing.district}</td>
                        <td>${listing.type}</td>
                        <td>€${listing.price}</td>
                        <td>${listing.rating}/5</td>
                        <td>${listing.distance} km</td>
                        <td>${listing.verified ? '✓ Yes' : '✗ No'}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });

            // Show message if no results
            if (filteredListings.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 2rem; color: #cbd5e1;">No accommodations match your filters. Try adjusting your criteria.</td></tr>';
            }
        }

        // Generate Recommendations
        function generateRecommendations() {
            const budget = parseFloat(document.getElementById('matchBudget').value) || 1000;
            const district = document.getElementById('matchDistrict').value;
            const minRating = parseFloat(document.getElementById('matchRating').value) || 4.0;

            const scored = sampleListings.map(listing => {
                let score = 0;

                // Price Affordability (30%)
                const priceScore = listing.price <= budget ? 30 : Math.max(0, 30 - ((listing.price - budget) / budget * 30));
                score += priceScore;

                // Location Proximity (20%)
                const locationScore = listing.district === district ? 20 : 10;
                score += locationScore;

                // Guest Satisfaction (30%)
                const satisfactionScore = (listing.rating / 5) * 30;
                score += satisfactionScore;

                // Verification Status (20%)
                const verificationScore = listing.verified ? 20 : 0;
                score += verificationScore;

                return { ...listing, matchScore: Math.round(score) };
            }).filter(l => l.rating >= minRating).sort((a, b) => b.matchScore - a.matchScore).slice(0, 5);

            const container = document.getElementById('recommendationsContainer');
            container.innerHTML = '';

            scored.forEach((listing, index) => {
                const card = `
                    <div class="recommendation-card">
                        <h3>#${index + 1} ${listing.name}</h3>
                        <div class="score">Match Score: ${listing.matchScore}/100</div>
                        <div class="details">
                            <div class="detail-item"><strong>District:</strong> ${listing.district}</div>
                            <div class="detail-item"><strong>Price:</strong> €${listing.price}/month</div>
                            <div class="detail-item"><strong>Rating:</strong> ${listing.rating}/5</div>
                            <div class="detail-item"><strong>Type:</strong> ${listing.type}</div>
                            <div class="detail-item"><strong>Distance:</strong> ${listing.distance} km</div>
                            <div class="detail-item"><strong>Verified:</strong> ${listing.verified ? 'Yes' : 'No'}</div>
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
        }

        // Attach event listeners to filters
        document.getElementById('districtFilter').addEventListener('change', populateTenantTable);
        document.getElementById('priceFilter').addEventListener('input', populateTenantTable);
        document.getElementById('roomTypeFilter').addEventListener('change', populateTenantTable);

        // Attach event listeners to matching filters
        document.getElementById('matchBudget').addEventListener('input', generateRecommendations);
        document.getElementById('matchDistrict').addEventListener('change', generateRecommendations);
        document.getElementById('matchRating').addEventListener('input', generateRecommendations);

        // Initialize
        populateTenantTable();
        generateRecommendations();
    </script>
</body>
</html>
